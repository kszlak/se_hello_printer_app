language: python

services:
  - docker

python:
  - "2.7"

install:
  - make deps

script:
  - make lint
  - make test
  - make docker_build
  - make docker_push
  - make test_xunit

deploy:
  provider: heroku
  app: fast-springs-23236
  api_key: ${HEROKU_API_KEY}
  provider: releases
  api_key: "540ce7681dc10c719352e943e3e58235ffda417d"
  file: ".gitlab-ci.yml"
  skip_cleanup: true
  on:
    tags: true
